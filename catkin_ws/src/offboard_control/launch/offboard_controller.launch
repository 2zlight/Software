<launch>
    <arg name="veh" doc="Name of vehicle. ex: megaman"/>
    <arg name="num" doc="Vicon space vehicle number following DB. ex:01"/>
    <arg name="local" default="false" doc="true for running on laptop. false for running on vehicle."/>
    <arg name="config" default="baseline" doc="Specify a config."/>
    <arg name="param_file_name" default="default" doc="Specify a param file. ex:megaman. Note that you will need a megaman.yaml in the config folder for every node you are launching. To test with only one megaman.yaml, the recommendation is to set this to default and then manually change the desired param file in the approprate rosparam tag below"/> 
    <arg name="drive" default="true"/>

    <include file="$(find duckietown)/machines"/>

    <!-- twist remapper -->
    <remap from="twist_to_twist2d_node/cmd_vel" to="/DB$(arg num)/cmd_vel"/>
    <node ns="$(arg veh)" name="twist_to_twist2d_node" pkg="offboard_control" type="twist_to_twist2d_node.py"/>

    <!-- car_cmd_switch_node -->
    <remap from="inverse_kinematics_node/car_cmd" to="twist_to_twist2d_node/car_cmd"/>
    <include file="$(find dagu_car)/launch/inverse_kinematics_node.launch">
        <arg name="veh" value="$(arg veh)"/>
        <arg name="local" value="$(arg local)"/>
        <arg name="config" value="$(arg config)"/>
    </include>

    <group if="$(arg drive)">
        <!-- Wheel Driver -->
	<remap from="wheels_driver_node/wheels_cmd" to="inverse_kinematics_node/wheels_cmd"/>
    	<include file="$(find dagu_car)/launch/wheels_driver_node.launch">
            <arg name="veh" value="$(arg veh)"/>
        </include>
    </group>

</launch>
